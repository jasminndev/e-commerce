{#{% extends 'auth/100k.uz.html' %}#}
{#{% block base %}#}
{#    {% load humanize %}#}
{#    <style>#}
{#        #productPrice {#}
{#            font-size: 26px;#}
{#        }#}
{#    </style>#}
{#    <main class="client-template">#}
{#        <section class="main">#}
{#            <div id="notifications-container"></div>#}
{#            <div class="container py-3">#}
{#                <div class="row align-items-center">#}
{#                    <div class="col my-3 pr-3">#}
{#                        <h1 class="h4 font-weight-bold mb-0">{{ product.name }}</h1>#}
{#                    </div>#}
{#                    <div class="col-auto my-3 text-right">#}
{#                        <strong data-price="{{ product.price|intcomma }}" id="productPrice" class="position-price1">#}
{#                            {{ product.price|intcomma }} so'm#}
{#                        </strong>#}
{#                        <div class="text-warning">#}
{#                            {% for _ in '12345' %}#}
{#                                <i class="fa fa-star"></i>#}
{#                            {% endfor %}#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{##}
{#                <div class="row">#}
{#                    <div class="col-md-6 mb-4">#}
{#                        {% if product.main_image.url %}#}
{#                            <div class="text-center">#}
{#                                <img src="{{ product.main_image.url }}"#}
{#                                     alt="{{ product.name }}"#}
{#                                     style="width: 500px; height: 500px; object-fit: contain; border-radius: 10px;">#}
{#                            </div>#}
{#                        {% else %}#}
{#                            <div class="text-center">#}
{#                                <img src="/media/8d4264ed-26f0-464d-aaed-2311bfdf731d.png"#}
{#                                     alt="Mahsulot rasmi"#}
{#                                     style="width: 250px; height: 150px; object-fit: contain; border-radius: 10px;">#}
{#                            </div>#}
{#                        {% endif %}#}
{#                    </div>#}
{##}
{#                    <div class="col-md-6 pl-md-4 mb-4">#}
{#                        <form id="orderForm" method="POST" action="/create-order"#}
{#                              class="orderForm sk-form d-flex flex-column justify-content-between"#}
{#                              style="min-height:100%;">#}
{#                            {% csrf_token %}#}
{#                            <div>#}
{#                                <h2 class="h3 font-weight-bold mb-4"><a href="#orderFormSection">Buyurtma berish</a></h2>#}
{#                                <p class="mb-3">Mahsulot narxi: <strong class="pricetag position-price2">#}
{#                                    {{ product.price|intcomma }} so'm#}
{#                                </strong></p>#}
{#                                <div class="alert alert-info">#}
{#                                    <strong>Yetkazib berish narxi: 30,000 so'm</strong>#}
{#                                </div>#}
{#                            </div>#}
{##}
{#                            <div class="my-3">#}
{#                                <input type="hidden" name="product_id" value="{{ product.id }}">#}
{#                                <input type="hidden" name="store_id" value="{{ product.store_id }}">#}
{#                                <input type="hidden" name="product_item_id" value="{{ product.id }}">#}
{#                                <input type="hidden" name="stream_id" value="">#}
{##}
{#                                <div class="form-group">#}
{#                                    <input class="form-control needclear" name="client_full_name" placeholder="Ismingiz"#}
{#                                           type="text" required>#}
{#                                </div>#}
{#                                <div class="form-group">#}
{#                                    <input class="my-phone-mask form-control needclear" name="customer_phone"#}
{#                                           id="customer_phone" placeholder="Telefon raqamingiz" type="text" required>#}
{#                                </div>#}
{##}
{#                                <div class="form-group">#}
{#                                    <select required class="form-control" name="region_id">#}
{#                                        <option value="" selected>Hududni tanlang ⬇</option>#}
{#                                        {% for region in regions %}#}
{#                                            <option value="{{ region.id }}">{{ region.name }}</option>#}
{#                                        {% endfor %}#}
{#                                    </select>#}
{#                                </div>#}
{#                            </div>#}
{##}
{#                            <div>#}
{#                                <div class="row">#}
{#                                    <div class="col text-center">#}
{#                                        <button id="btnSubmit" type="submit"#}
{#                                                class="sk-btn sk-btn--primary sk-btn--block sk-btn--lg"#}
{#                                                style="max-width: 100%">#}
{#                                            Buyurtma berish#}
{#                                            <div class="loader"></div>#}
{#                                        </button>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </form>#}
{#                    </div>#}
{#                </div>#}
{##}
{#                <div class="container mt-4">#}
{#                    <ul class="nav nav-tabs">#}
{#                        <li class="nav-item">#}
{#                            <a href="#productDescription" class="nav-link active" data-toggle="tab">Batafsil ma'lumot</a>#}
{#                        </li>#}
{#                    </ul>#}
{#                    <div class="tab-content py-3">#}
{#                        <div class="tab-pane fade show active" id="productDescription">#}
{#                            <div>{{ product.description|safe }}</div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </section>#}
{#    </main>#}
{#{% endblock %}#}


{% extends 'auth/100k.uz.html' %}
{% block base %}
    {% load humanize %}
    <style>
        #productPrice {
            font-size: 26px;
        }

        .product-gallery {
            text-align: center;
        }

        .main-image img {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 10px;
        }

        .owl-dots {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            gap: 8px;
            flex-wrap: wrap;
        }

        .owl-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #ccc;
            cursor: pointer;
        }

        .owl-dot.active {
            background-color: #333;
        }
    </style>
    <main class="client-template">
        <section class="main">
            <div id="notifications-container"></div>
            <div class="container py-3">
                <div class="row align-items-center">
                    <div class="col my-3 pr-3">
                        <h1 class="h4 font-weight-bold mb-0">{{ product.name }}</h1>
                    </div>
                    <div class="col-auto my-3 text-right">
                        <strong data-price="{{ product.price|intcomma }}" id="productPrice" class="position-price1">
                            {{ product.price|intcomma }} so'm
                        </strong>
                        <div class="text-warning">
                            {% for _ in '12345' %}
                                <i class="fa fa-star"></i>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-4">
                        {% if product.main_image.url %}
                            <div class="text-center">
                                <img id="mainProductImage" src="{{ product.main_image.url }}"
                                     alt="{{ product.name }}"
                                     style="width: 450px; height: 450px; object-fit: contain; border-radius: 10px;">
                            </div>
                        {% else %}
                            <div class="text-center">
                                <img id="mainProductImage" src="/media/8d4264ed-26f0-464d-aaed-2311bfdf731d.png"
                                     alt="Mahsulot rasmi"
                                     style="width: 450px; height: 450px; object-fit: contain; border-radius: 10px;">
                            </div>
                        {% endif %}
                        <div class="owl-dots">
                            {% for image in product.image_file %}
                                <button role="button" class="owl-dot {% if forloop.first %}active{% endif %}"
                                        onclick="changeMainImage('{{ image_file.url }}', this)">
                                    <span></span>
                                </button>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="col-md-6 pl-md-4 mb-4">
                        <form id="orderForm" method="POST" action="/create-order"
                              class="orderForm sk-form d-flex flex-column justify-content-between"
                              style="min-height:100%;">
                            {% csrf_token %}
                            <div>
                                <h2 class="h3 font-weight-bold mb-4"><a href="#orderFormSection">Buyurtma berish</a>
                                </h2>
                                <p class="mb-3">Mahsulot narxi: <strong class="pricetag position-price2">
                                    {{ product.price|intcomma }} so'm
                                </strong></p>
                                <div class="alert alert-info">
                                    <strong>Yetkazib berish narxi: 30,000 so'm</strong>
                                </div>
                            </div>

                            <div class="my-3">
                                <input type="hidden" name="product_id" value="{{ product.id }}">
                                <input type="hidden" name="store_id" value="{{ product.store_id }}">
                                <input type="hidden" name="product_item_id" value="{{ product.id }}">
                                <input type="hidden" name="stream_id" value="">

                                <div class="form-group">
                                    <input class="form-control needclear" name="client_full_name" placeholder="Ismingiz"
                                           type="text" required>
                                </div>
                                <div class="form-group">
                                    <input class="my-phone-mask form-control needclear" name="customer_phone"
                                           id="customer_phone" placeholder="Telefon raqamingiz" type="text" required>
                                </div>

                                <div class="form-group">
                                    <select required class="form-control" name="region_id">
                                        <option value="" selected>Hududni tanlang ⬇</option>
                                        {% for region in regions %}
                                            <option value="{{ region.id }}">{{ region.name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col text-center">
                                    <a href="{% url 'order' %}"
                                       class="sk-btn sk-btn--primary sk-btn--block sk-btn--lg" style="max-width: 100%">
                                        Buyurtma berish
                                        <div class="loader"></div>
                                    </a>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>

                <div class="container mt-4">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a href="#productDescription" class="nav-link active" data-toggle="tab">Batafsil
                                ma'lumot</a>
                        </li>
                    </ul>
                    <div class="tab-content py-3">
                        <div class="tab-pane fade show active" id="productDescription">
                            <div>{{ product.description|safe }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        function changeMainImage(imageUrl, dotElement) {
            document.getElementById('mainProductImage').src = imageUrl;

            document.querySelectorAll('.owl-dot').forEach(dot => dot.classList.remove('active'));

            dotElement.classList.add('active');
        }
    </script>
{% endblock %}

